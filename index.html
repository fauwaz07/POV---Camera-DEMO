<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>POV Camera App</title>
</head>
<body>
    <h1>Snap a Photo</h1>
    <input type="file" accept="image/*" capture="environment" id="cameraInput">
    <br>
    <button id="upload" disabled>⬆️ Upload</button>

    <script>
        const cameraInput = document.getElementById('cameraInput');
        const uploadBtn = document.getElementById('upload');
        let imageBase64 = "";

        cameraInput.addEventListener("change", () => {
            const file = cameraInput.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function (e) {
                imageBase64 = e.target.result.split(',')[1]; // remove base64 prefix
                uploadBtn.disabled = false;
            };
            reader.readAsDataURL(file);
        });

        uploadBtn.onclick = () => {
            fetch("https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec", {
                method: "POST",
                body: new URLSearchParams({
                    image: imageBase64,
                    filename: "photo_" + Date.now() + ".jpg"
                })
            })
                .then(res => res.text())
                .then(txt => alert("Upload: " + txt))
                .catch(err => alert("Error: " + err));
        };
    </script>
</body>
</html>
